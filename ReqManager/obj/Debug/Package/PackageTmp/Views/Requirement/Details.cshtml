@model ReqManager.ViewModels.RequirementViewModel

@{
    ViewBag.Title = "Requirement Details";
}
<div class="form-group">
    <div class="dropdown">
        <a href="#" title="Options" class="btn btn-default" data-toggle="dropdown" aria-expanded="false">
            <i class="fa fa-cog icon_8"></i>
            <i class="fa fa-chevron-down icon_8"></i>
            <div class="ripple-wrapper"></div>
        </a>
        <ul class="dropdown-menu">
            <li>
                <a href="" onclick="addStakeholder(); return false;">Add Stakeholder to this Requirement</a>
            </li>
            <li>
                @Html.ActionLink("Add Characteristic to this Requirement ", "Create", "RequirementCharacteristics", new { id = Model.RequirementID }, null)
            </li>
            <li>
                @Html.ActionLink("Add Link to other Requirement", "CreateNewLink", "LinkBetweenRequirements", new { id = Model.RequirementID }, null)
            </li>
            <li>
                @Html.ActionLink("Add Link to Artifact", "CreateNewLink", "LinkBetweenRequirementsArtifact", new { id = Model.RequirementID }, null)
            </li>
            <li>
                @Html.ActionLink("Appreciate", "Approve", "StakeholderRequirementApproval", new { id = Model.RequirementID }, null)
            </li>
            <li>
                @Html.ActionLink("Request Change", "RequestNewChange", "RequirementRequestForChanges", new { id = Model.RequirementID }, null)
            </li>
            <li>
                @Html.ActionLink("Tracking", "TrackingRequirement", "Tracking", new { id = Model.RequirementID }, null)
            </li>
            <li>
                <a href="" onclick="printDocumentRequirement(); return false;">Print Requirement</a>
            </li>
            <li>
                @Html.ActionLink("Back to Project", "Details", "Projects", new { id = Model.ProjectID }, null)
            </li>
            <li>
                @Html.ActionLink("Back to Requirements", "Index")
            </li>
        </ul>
    </div>
</div>
<div>
    @Html.Hidden("ID", Request.Url.Segments.Last().ToString())
    <div id="tabs">
        <ul>
            <li><a href="#req">Requirement</a></li>
            <li><a href="#rr">R-R Traceability</a></li>
            <li><a href="#ra">R-A Traceability</a></li>
            <li><a href="#characteristics">Characteristics</a></li>
            <li><a href="#stakeholder">Stakeholders</a></li>
            <li><a href="#stakeholderApproval">Stakeholders Appreciation</a></li>
            <li><a href="#request">Changes Request</a></li>
            <li><a href="#versions">Versions</a></li>
        </ul>
        <div id="req">
            <div class="row">
                <div class="col-md-4">
                    <dl class="dl-horizontal">
                        <dt>
                            @Html.DisplayNameFor(model => model.code)
                        </dt>

                        <dd>
                            @Html.DisplayFor(model => model.code) version @Html.DisplayFor(model => model.versionNumber)
                        </dd>
                        <dt>
                            @Html.DisplayNameFor(model => model.title)
                        </dt>

                        <dd>
                            @Html.DisplayFor(model => model.title)
                        </dd>
                        <dt>
                            Active
                        </dt>

                        <dd>
                            @Html.DisplayFor(model => model.active)
                        </dd>
                        <dt>
                            Pre-Traceability
                        </dt>

                        <dd>
                            @Html.DisplayFor(model => model.preTraceability)
                        </dd>
                    </dl>
                </div>
                <div class="col-md-4">
                    <dl class="dl-horizontal">
                        <dt>
                            @Html.DisplayNameFor(model => model.Importance.description)
                        </dt>

                        <dd>
                            @Html.DisplayFor(model => model.Importance.description)
                        </dd>

                        <dt>
                            @Html.DisplayNameFor(model => model.RequirementStatus.description)
                        </dt>

                        <dd>
                            @Html.DisplayFor(model => model.RequirementStatus.description)
                        </dd>

                        <dt>
                            Type
                        </dt>

                        <dd>
                            @Html.DisplayFor(model => model.DisplayType)
                        </dd>

                    </dl>
                </div>
                <div class="col-md-4">
                    <dl class="dl-horizontal">

                        <dt>
                            @Html.DisplayNameFor(model => model.Users.name)
                        </dt>

                        <dd>
                            @Html.DisplayFor(model => model.Users.name)
                        </dd>

                        <dt>
                            @Html.DisplayNameFor(model => model.creationDate)
                        </dt>

                        <dd>
                            @Html.DisplayFor(model => model.creationDate)
                        </dd>
                    </dl>
                </div>
            </div>
            <div class="row">

                <dl class="dl-horizontal">
                    <dt>
                        Info
                    </dt>

                    <dd>
                        @Html.EditorFor(model => model.description, new { htmlAttributes = new { @class = "form-control" } })
                    </dd>

                </dl>
            </div>
            <div class="row">

                <dl class="dl-horizontal">
                    <dt>
                        Rationale
                    </dt>

                    <dd>
                        @Html.EditorFor(model => model.rationale,
                       new { htmlAttributes = new { @class = "form-control", @rows = 10, @style = "resize:none;", @disabled = "disabled" } })
                    </dd>

                </dl>
            </div>
        </div>
        <div id="rr">
            <table class="table">
                <tr>
                    <th>
                        Link Code
                    </th>
                    <th>
                        Origin Code
                    </th>
                    <th>
                        Target Code
                    </th>
                    <th>
                        Type
                    </th>
                    <th>
                        User
                    </th>
                    <th>
                        Date
                    </th>
                    <th></th>
                </tr>
                @foreach (var item in Model.linkReq)
                {
                    <tr>
                        <td>
                            <a href="" data-code='@item.code'
                               onclick="LinkBetweenRequirementsDetails($(this)); return false;">
                                @Html.DisplayFor(modelItem => item.code)
                            </a>
                        </td>
                        <td>
                            <a href="" data-code='@item.RequirementOrigin.code'
                               onclick="RequirementDetails($(this)); return false;">
                                @Html.DisplayFor(modelItem => item.RequirementOrigin.code)
                            </a>
                        </td>
                        <td>
                            <a href="" data-code='@item.RequirementTarget.code'
                               onclick="RequirementDetails($(this)); return false;">
                                @Html.DisplayFor(modelItem => item.RequirementTarget.code)
                            </a>
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.TypeLink.description)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Users.name)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.creationDate)
                        </td>
                        <td>
                            @Html.ActionLink("Add Attribute",
                        "CreateNewAttributeForLink",
                        "LinkRequirementAttributes", new { id = item.LinkRequirementsID }, null)
                        </td>
                    </tr>
                }
            </table>
        </div>
        <div id="ra">
            <table class="table">
                <tr>
                    <th>
                        Code
                    </th>
                    <th>
                        Artifact Code
                    </th>
                    <th>
                        Requirement Code
                    </th>
                    <th>
                        Type Link
                    </th>
                    <th>
                        User
                    </th>
                    <th>
                        Date
                    </th>
                    <th></th>
                </tr>

                @foreach (var item in Model.linkReqArt)
                {
                    <tr>
                        <td>
                            <a href="" data-code='@item.code'
                               onclick="LinkBetweenRequirementsArtifactsDetails($(this)); return false;">
                                @Html.DisplayFor(modelItem => item.code)
                            </a>
                        </td>
                        <td>
                            <a href="" data-code='@item.ProjectArtifact.code'
                               onclick="ArtifactDetails($(this)); return false;">
                                @Html.DisplayFor(modelItem => item.ProjectArtifact.code)
                            </a>
                        </td>
                        <td>
                            <a href="" data-code='@item.Requirement.code'
                               onclick="RequirementDetails($(this)); return false;">
                                @Html.DisplayFor(modelItem => item.Requirement.code)
                            </a>
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.TypeLink.description)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Users.name)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.creationDate)
                        </td>
                        <td>
                            @Html.ActionLink("Add Attribute",
                        "CreateNewAttributeForLink",
                        "LinkArtifactAttributes", new { id = item.LinkArtifactRequirementID }, null)
                        </td>

                    </tr>
                }

            </table>
        </div>
        <div id="stakeholder">
            <table id="stakeholderRequirement" class="table">
                <thead>
                    <tr>
                        <th>
                            Requirement
                        </th>
                        <th>
                            Stakeholder
                        </th>
                        <th>
                            Importance
                        </th>
                        <th>
                            Date
                        </th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model.stakeholders)
                    {
                        <tr>
                            <td>
                                @Html.DisplayFor(modelItem => item.Requirement.DisplayName)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.StakeholdersProject.DisplayName)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.importanceValue)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.creationDate)
                            </td>
                            <td>
                                <p>
                                    @Html.ActionLink("Edit", "Edit",
                            "StakeholderRequirement",
                            new { id = item.StakeholderRequirementID }, null)
                                </p>
                                <p>
                                    @Html.ActionLink("Delete", "Delete",
                            "StakeholderRequirement",
                            new { id = item.StakeholderRequirementID }, null)
                                </p>
                            </td>
                        </tr>
                    }
                </tbody>

            </table>
        </div>
        <div id="stakeholderApproval">
            <table class="table">
                <tr>
                    <th>
                        Name
                    </th>
                    <th>
                        Approval Description
                    </th>
                    <th>
                        Approved
                    </th>
                    <th>
                        Date
                    </th>
                </tr>
                @foreach (var item in Model.stakeholdersApproval)
                {
                    <tr>
                        <td>
                            @Html.DisplayFor(modelItem => item.DisplayName)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.description)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.approved)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.creationDate)
                        </td>
                    </tr>
                }
            </table>
        </div>
        <div id="characteristics">
            <table class="table">
                <tr>
                    <th>Name</th>
                    <th>Description</th>
                    <th>Checked</th>
                    <th></th>
                </tr>
                @foreach (var item in Model.characteristics)
                {
                    <tr>
                        <td>
                            @Html.DisplayFor(modelItem => item.Characteristics.name)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Characteristics.description)
                        </td>
                        <td>
                            <input data-val="true" checked='@item.check'
                                   onchange="checkCharacteristic(this, @item.RequirementCharacteristicsID)"
                                   type="checkbox" value="true">
                        </td>
                        <td>
                            @if (!item.Characteristics.required)
                            {
                                <p>
                                    @Html.ActionLink("Delete", "Delete", "RequirementCharacteristics", new { id = item.RequirementCharacteristicsID }, null)
                                </p>
                            }
                        </td>
                    </tr>
                }
            </table>
        </div>
        <div id="request">
            <table class="table">
                <tr>
                    <th>Req. Code</th>
                    <th>Stakeholder</th>
                    <th>Status</th>
                    <th>Request</th>
                    <th>Creation Date</th>
                    <th>Actions</th>
                </tr>
                @foreach (var item in Model.request)
                {
                    <tr>
                        <td>
                            @Html.DisplayFor(modelItem => item.StakeholderRequirement.Requirement.DisplayName)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.StakeholderRequirement.StakeholdersProject.Stakeholders.DisplayName)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.RequestStatus.description)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.request)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.creationDate)
                        </td>
                        <td>
                            @switch (item.RequestStatus.RequestStatusID)
                            {
                                case 1:
                                    {
                                        <p>
                                            @Html.ActionLink("Approve", "Edit", new { id = item.RequirementRequestForChangesID })
                                        </p>
                                        <p>
                                            <a href="" onclick="requestInAnalysis(@item.RequirementRequestForChangesID); return false;">In Analysis</a>
                                        </p>
                                        <p>
                                            <a href="" onclick="requestReject(@item.RequirementRequestForChangesID); return false;">Reject</a>
                                        </p>
                                        break;
                                    }
                                case 2:
                                    {
                                        <p>
                                            @Html.ActionLink("Approve", "Edit", new { id = item.RequirementRequestForChangesID })
                                        </p>
                                        <p>
                                            <a href="" onclick="requestReject(@item.RequirementRequestForChangesID); return false;">Reject</a>
                                        </p>
                                        break;
                                    }
                                case 3:
                                    {
                                        @Html.Label("Approved!");
                                        break;
                                    }
                                case 4:
                                    {
                                        @Html.Label("Rejected!");
                                        break;
                                    }
                                default:
                                    {
                                        break;
                                    }
                            }
                        </td>
                    </tr>
                }
            </table>
        </div>
        <div id="versions">
            <table class="table">
                <tr>
                    <th>Title</th>
                    <th>Version Number</th>
                    <th>Importance</th>
                    <th>Status</th>
                    <th>Type</th>
                    <th>SubType</th>
                    <th>Rationale</th>
                    <th>Start Date</th>
                    <th>End Date</th>
                    <th>Cost</th>
                    <th>Version Date</th>
                </tr>
                @foreach (var item in Model.versions)
                {
                    <tr>
                        <td>
                            @Html.DisplayFor(modelItem => item.title)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.versionNumber)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Importance.description)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.RequirementStatus.description)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.RequirementType.description)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.RequirementSubType.description)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.rationale)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.startDate)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.endDate)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.cost)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.creationDate)
                        </td>
                    </tr>
                }
            </table>
        </div>
    </div>
</div>

<div id="modal-addStakeholder" class="modal fade">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title"><label>Add Stakeholder to this Requirement</label></h4>
            </div>
            <div class="modal-body">
                <div class="form-horizontal">
                    <div class="form-group">
                        @Html.Label("Stakeholder", htmlAttributes: new { @class = "control-label col-md-2" })
                        <div class="col-md-10">
                            @Html.DropDownList("StakeholderProjectID", Enumerable.Empty<SelectListItem>(),
                           "SELECT THE STAKEHOLDER", htmlAttributes: new { @class = "form-control" })
                        </div>
                    </div>
                    <div class="form-group">
                        @Html.Label("Importance", htmlAttributes: new { @class = "control-label col-md-2" })
                        <div class="col-md-10">
                            <select id="stakeholderRating" class="rating">
                                <option value="0">0</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" onclick="confirmAddStakeholder(); return false;">Add</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div id="modal-requirementDetails" class="modal fade">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title">Requirements Details</h4>
            </div>
            <div class="modal-body">
                <dl class="dl-horizontal">

                    <dt>
                        Title
                    </dt>

                    <dd>
                        <label id="title"></label>
                    </dd>

                    <dt>
                        Importance
                    </dt>

                    <dd>
                        <label id="importance"></label>
                    </dd>

                    <dt>
                        Status
                    </dt>

                    <dd>
                        <label id="status"></label>
                    </dd>

                    <dt>
                        Type
                    </dt>

                    <dd>
                        <label id="type"></label>
                    </dd>

                    <dt>
                        Create By
                    </dt>

                    <dd>
                        <label id="user"></label>
                    </dd>

                    <dt>
                        Creation Date
                    </dt>

                    <dd>
                        <label id="creationDate"></label>
                    </dd>
                </dl>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div id="modal-artifactDetails" class="modal fade">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title">Artifact Details</h4>
            </div>
            <div class="modal-body">
                <dl class="dl-horizontal">
                    <dt>
                        Importance
                    </dt>

                    <dd>
                        <label id="mdArtifactImportance"></label>
                    </dd>

                    <dt>
                        Project
                    </dt>

                    <dd>
                        <label id="mdArtifactProject"></label>
                    </dd>

                    <dt>
                        Create By
                    </dt>

                    <dd>
                        <label id="mdArtifactCreateBy"></label>
                    </dd>

                    <dt>
                        Type
                    </dt>

                    <dd>
                        <label id="mdArtifactType"></label>
                    </dd>

                    <dt>
                        Code
                    </dt>

                    <dd>
                        <label id="mdArtifactCode"></label>
                    </dd>

                    <dt>
                        Description
                    </dt>

                    <dd>
                        <label id="mdArtifactDescription"></label>
                    </dd>

                    <dt>
                        Date
                    </dt>

                    <dd>
                        <label id="mdArtifactDate"></label>
                    </dd>

                </dl>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div id="modal-linkBetweenRequirements" class="modal fade">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title">Link between Requirements Details</h4>
            </div>
            <div class="modal-body">
                <dl class="dl-horizontal">

                    <dt>
                        Code
                    </dt>

                    <dd>
                        <label id="mdLinkRequirementCode"></label>
                    </dd>

                    <dt>
                        Link Name
                    </dt>

                    <dd>
                        <label id="mdLinkRequirementName"></label>
                    </dd>

                    <dt>
                        Code Origin
                    </dt>

                    <dd>
                        <label id="mdLinkRequirementOrigin"></label>
                    </dd>

                    <dt>
                        Code Target
                    </dt>

                    <dd>
                        <label id="mdLinkRequirementTarget"></label>
                    </dd>

                    <dt>
                        Create By
                    </dt>

                    <dd>
                        <label id="mdLinkRequirementUser"></label>
                    </dd>

                    <dt>
                        Type Link
                    </dt>

                    <dd>
                        <label id="mdLinkRequirementTypeLink"></label>
                    </dd>

                    <dt>
                        Creation Date
                    </dt>

                    <dd>
                        <label id="mdLinkRequirementCreationDate"></label>
                    </dd>
                </dl>
                <table id="attributesLinkRequirementTable" class="table">
                    <tr>
                        <th>
                            Attributes
                        </th>
                    </tr>
                </table>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div id="modal-linkBetweenRequirementsArtifacts" class="modal fade">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title">Link between Requirements and Artifacts Details</h4>
            </div>
            <div class="modal-body">
                <dl class="dl-horizontal">

                    <dt>
                        Code
                    </dt>

                    <dd>
                        <label id="mdLinkArtifactCode"></label>
                    </dd>

                    <dt>
                        Link Name
                    </dt>

                    <dd>
                        <label id="mdLinkArtifactName"></label>
                    </dd>

                    <dt>
                        Requirement
                    </dt>

                    <dd>
                        <label id="mdLinkArtifactRequirement"></label>
                    </dd>

                    <dt>
                        Artifact
                    </dt>

                    <dd>
                        <label id="mdLinkArtifact"></label>
                    </dd>

                    <dt>
                        Create By
                    </dt>

                    <dd>
                        <label id="mdLinkArtifactUser"></label>
                    </dd>

                    <dt>
                        Type Link
                    </dt>

                    <dd>
                        <label id="mdLinkArtifactTypeLink"></label>
                    </dd>

                    <dt>
                        Creation Date
                    </dt>

                    <dd>
                        <label id="mdLinkArtifactCreationDate"></label>
                    </dd>
                </dl>
                <table id="attributesLinkRequirementArtifactTable" class="table">
                    <tr>
                        <th>
                            Attributes
                        </th>
                    </tr>
                </table>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")

    <script type="text/javascript">
        function checkCharacteristic(element, ID) {
            $.post('@Url.Action("Check", "RequirementCharacteristics")',
                { RequirementCharacteristicsID: ID, check: element.checked }, function () {
                    alert("Register was change with Success!");
                });
        };

        function requestInAnalysis(RequirementRequestForChangesID) {
            $.post('@Url.Action("ChangeStatus", "RequirementRequestForChanges")',
                { RequirementRequestForChangesID: RequirementRequestForChangesID, RequestStatusID: 2 }, function () {
                    alert("Register was change with Success!");
                    window.location = '@Url.Action("Details", "Requirement", new { id = Model.RequirementID }, null)'
                });
        };

        function requestReject(RequirementRequestForChangesID) {
            $.post('@Url.Action("ChangeStatus", "RequirementRequestForChanges")',
                { RequirementRequestForChangesID: RequirementRequestForChangesID, RequestStatusID: 4 }, function () {
                    alert("Register was change with Success!");
                    window.location = '@Url.Action("Details", "Requirement", new { id = Model.RequirementID }, null)'
                });
        };

        function printDocumentRequirement() {
            var RequirementID = $("#ID").val();
            window.open('../../Requirement/PrintDocumentRequirement?RequirementID=' + RequirementID);
        };

        function addStakeholder() {
            var RequirementID = $('#ID').val();

            $.getJSON('@Url.Action("Get", "Requirement")',
                { ID: RequirementID }, function (response) {
                    $.getJSON('@Url.Action("GetStakeholdersFromProject", "StakeholdersProject")',
                        { ProjectID: response.ProjectID }, function (response) {
                            $.each(response, function (index, item) {
                                var optionExists = ($('#StakeholderProjectID option[value=' + item.StakeholdersProjectID + ']').length > 0);
                                if (!optionExists)
                                    $('#StakeholderProjectID').append("<option value='" + item.StakeholdersProjectID + "'>" + item.DisplayName + "</option>");
                            });
                        });
                });

            jQuery('#modal-addStakeholder').modal();
        };

        function confirmAddStakeholder() {
            var StakeholderProjectID = $('#StakeholderProjectID').val();
            var RequirementID = $('#ID').val();
            var importanceValue = $('#stakeholderRating').val();

            $.post('@Url.Action("Add", "StakeholderRequirement")',
                { StakeholderProjectID: StakeholderProjectID, RequirementID: RequirementID, importanceValue: importanceValue }, function () {
                    jQuery('#modal-addStakeholder').modal('hide');
                    alert("Register was made with Success!");

                    $.getJSON('@Url.Action("GetStakeholdersFromRequirement", "StakeholderRequirement")',
                        { RequirementID: RequirementID }, function (response) {
                            $('#stakeholderRequirement tbody').remove();
                            $.each(response, function (index, item) {
                                $('#stakeholderRequirement').append(
                                    '<tr><td>' + item.Requirement.DisplayName +
                                    '</td><td>' + item.StakeholdersProject.DisplayName +
                                    '</td><td>' + item.StakeholdersProject.importanceValue +
                                    '</td><td>' + fixDateTime(item.creationDate) + '</td><td>' +
                                    '<a href=\"/StakeholderRequirement/Delete/' + item.StakeholderRequirementID +
                                '\">Details</a>'
                                    + '</td></tr>');
                            });
                        });
                });
        };

        function LinkBetweenRequirementsDetails(link) {
            var code = link.attr('data-code');

            $.getJSON('@Url.Action("GetWithCode", "LinkBetweenRequirements")',
                { code: code }, function (response) {

                    $("#mdLinkRequirementCode").html(response.code);
                    $('#mdLinkRequirementName').html(response.DisplayName);
                    $('#mdLinkRequirementOrigin').html(response.RequirementOrigin.DisplayName);
                    $('#mdLinkRequirementTarget').html(response.RequirementTarget.DisplayName);
                    $('#mdLinkRequirementUser').html(response.Users.name);
                    $('#mdLinkRequirementTypeLink').html(response.TypeLink.description);
                    $('#mdLinkRequirementCreationDate').html(fixDateTime(response.creationDate));

                    $.getJSON('@Url.Action("GetAttributes", "LinkRequirementAttributes")',
                    { LinkRequirementsID: response.LinkRequirementsID },
                    function (response) {
                        $.each(response, function (i, item) {
                            $('#attributesLinkRequirementTable').append('<tr><td>' + item.DisplayName + '</td></tr>');
                        });
                    });
                });

            jQuery('#modal-linkBetweenRequirements').modal();
        };

        function LinkBetweenRequirementsArtifactsDetails(link) {
            var code = link.attr('data-code');

            $.getJSON('@Url.Action("GetWithCode", "LinkBetweenRequirementsArtifact")',
                { code: code }, function (response) {
                    $("#mdLinkArtifactCode").html(response.code);
                    $('#mdLinkArtifactName').html(response.DisplayName);
                    $('#mdLinkArtifactRequirement').html(response.Requirement.title);
                    $('#mdLinkArtifact').html(response.ProjectArtifact.DisplayName);
                    $('#mdLinkArtifactUser').html(response.Users.name);
                    $('#mdLinkArtifactTypeLink').html(response.TypeLink.description);
                    $('#mdLinkArtifactCreationDate').html(fixDateTime(response.creationDate));

                    $.getJSON('@Url.Action("GetAttributes", "LinkArtifactAttributes")',
                    { LinkArtifactRequirementID: response.LinkArtifactRequirementID },
                    function (response) {
                        $.each(response, function (i, item) {
                            $('#attributesLinkRequirementArtifactTable').append('<tr><td>' + item.DisplayName + '</td></tr>');
                        });
                    });
                });

            jQuery('#modal-linkBetweenRequirementsArtifacts').modal();
        };

        function RequirementDetails(requirement) {
            var code = requirement.attr('data-code');

            $.getJSON('@Url.Action("GetWithCode", "Requirement")',
                { code: code }, function (response) {
                    $("#title").html(response.title);
                    $("#importance").html(response.Importance.description);
                    $('#status').html(response.RequirementStatus.description);
                    $('#type').html(response.RequirementType.description);
                    $('#user').html(response.Users.name);
                    $('#title').html(response.title);
                    $('#creationDate').html(fixDateTime(response.creationDate));
                });

            jQuery('#modal-requirementDetails').modal();
        };

        function ArtifactDetails(artifact) {
            var code = artifact.attr('data-code');

            $.getJSON('@Url.Action("GetWithCode", "ProjectArtifact")',
                { code: code }, function (response) {
                    $("#mdArtifactImportance").html(response.Importance.description);
                    $('#mdArtifactProject').html(response.Project.description);
                    $('#mdArtifactCreateBy').html(response.Users.name);
                    $('#mdArtifactCode').html(response.code);
                    $('#mdArtifactType').html(response.ArtifactType.description);
                    $('#mdArtifactDescription').html(response.description);
                    $('#mdArtifactDate').html(fixDateTime(response.creationDate));
                });

            jQuery('#modal-artifactDetails').modal();
        };

    </script>
    <script src="~/Scripts/tinymce/tinymce.min.js"></script>
    <script type="text/javascript">
        tinymce.init({
            selector: '#description',
            height: 350,
            readonly: true,
            menubar: false,
            content_css: [
                '//fonts.googleapis.com/css?family=Lato:300,300i,400,400i',
                '//www.tinymce.com/css/codepen.min.css']
        });
    </script>
}